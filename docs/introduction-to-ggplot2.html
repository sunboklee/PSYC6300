<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Introduction to ggplot2 | R, Rstudio, and ggplot2</title>
  <meta name="description" content="This is an introduction to R, Rstudio, and ggplot2" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Introduction to ggplot2 | R, Rstudio, and ggplot2" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an introduction to R, Rstudio, and ggplot2" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Introduction to ggplot2 | R, Rstudio, and ggplot2" />
  
  <meta name="twitter:description" content="This is an introduction to R, Rstudio, and ggplot2" />
  

<meta name="author" content="Sunbok Lee" />


<meta name="date" content="2019-09-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html">
<link rel="next" href="descriptive-statistics.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> R</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installing-r"><i class="fa fa-check"></i><b>1.2</b> Installing R</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#installing-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#cheat-sheets-for-r"><i class="fa fa-check"></i><b>1.4</b> Cheat Sheets for R</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#rmarkdown-files"><i class="fa fa-check"></i><b>1.5</b> Rmarkdown files</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#r-topics-covered-in-this-course"><i class="fa fa-check"></i><b>1.6</b> R topics covered in this course</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html"><i class="fa fa-check"></i><b>2</b> Introduction to <code>ggplot2</code></a><ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#what-is-ggplot2"><i class="fa fa-check"></i><b>2.1</b> What is <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#data"><i class="fa fa-check"></i><b>2.2</b> Data</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#geometric-objects-geoms"><i class="fa fa-check"></i><b>2.3</b> Geometric objects (<strong>geoms</strong>)</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#exercise"><i class="fa fa-check"></i><b>2.4</b> Exercise</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#aesthetic-mappings"><i class="fa fa-check"></i><b>2.5</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#exercise-1"><i class="fa fa-check"></i><b>2.6</b> Exercise</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#scales"><i class="fa fa-check"></i><b>2.7</b> Scales</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#statistical-transformations-stats-for-short"><i class="fa fa-check"></i><b>2.8</b> Statistical transformations (<strong>stats</strong> for short)</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#a-faceting"><i class="fa fa-check"></i><b>2.9</b> A faceting</a></li>
<li class="chapter" data-level="2.10" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#exercise-2"><i class="fa fa-check"></i><b>2.10</b> Exercise</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#grouping"><i class="fa fa-check"></i><b>2.11</b> Grouping</a></li>
<li class="chapter" data-level="2.12" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#themes"><i class="fa fa-check"></i><b>2.12</b> Themes</a></li>
<li class="chapter" data-level="2.13" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#save-a-ggplot"><i class="fa fa-check"></i><b>2.13</b> Save a ggplot</a></li>
<li class="chapter" data-level="2.14" data-path="introduction-to-ggplot2.html"><a href="introduction-to-ggplot2.html#more-resources"><i class="fa fa-check"></i><b>2.14</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>3</b> Descriptive Statistics</a><ul>
<li class="chapter" data-level="3.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#r-functions-for-descriptive-statistics"><i class="fa fa-check"></i><b>3.1</b> R functions for descriptive statistics</a></li>
<li class="chapter" data-level="3.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#qplot"><i class="fa fa-check"></i><b>3.2</b> qplot()</a></li>
<li class="chapter" data-level="3.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#scatterplots"><i class="fa fa-check"></i><b>3.3</b> Scatterplots</a></li>
<li class="chapter" data-level="3.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#histogram"><i class="fa fa-check"></i><b>3.4</b> Histogram</a></li>
<li class="chapter" data-level="3.5" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#density-plots"><i class="fa fa-check"></i><b>3.5</b> Density plots</a></li>
<li class="chapter" data-level="3.6" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#barplots"><i class="fa fa-check"></i><b>3.6</b> Barplots</a></li>
<li class="chapter" data-level="3.7" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#boxplots"><i class="fa fa-check"></i><b>3.7</b> Boxplots</a></li>
<li class="chapter" data-level="3.8" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#faceting"><i class="fa fa-check"></i><b>3.8</b> Faceting</a></li>
<li class="chapter" data-level="3.9" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#the-corrplot-package"><i class="fa fa-check"></i><b>3.9</b> The <code>corrplot</code> Package</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exercise-3.html"><a href="exercise-3.html"><i class="fa fa-check"></i><b>4</b> Exercise</a></li>
<li class="chapter" data-level="5" data-path="base-r.html"><a href="base-r.html"><i class="fa fa-check"></i><b>5</b> Base R</a><ul>
<li class="chapter" data-level="5.1" data-path="base-r.html"><a href="base-r.html#topics"><i class="fa fa-check"></i><b>5.1</b> Topics</a></li>
<li class="chapter" data-level="5.2" data-path="base-r.html"><a href="base-r.html#further-reading"><i class="fa fa-check"></i><b>5.2</b> Further reading</a></li>
<li class="chapter" data-level="5.3" data-path="base-r.html"><a href="base-r.html#interaction-with-r"><i class="fa fa-check"></i><b>5.3</b> Interaction with R</a></li>
<li class="chapter" data-level="5.4" data-path="base-r.html"><a href="base-r.html#r-objects-and-variables"><i class="fa fa-check"></i><b>5.4</b> R Objects and Variables</a></li>
<li class="chapter" data-level="5.5" data-path="base-r.html"><a href="base-r.html#data-structure"><i class="fa fa-check"></i><b>5.5</b> Data Structure</a></li>
<li class="chapter" data-level="5.6" data-path="base-r.html"><a href="base-r.html#vectors-come-in-two-flavours"><i class="fa fa-check"></i><b>5.6</b> Vectors Come in Two Flavours</a></li>
<li class="chapter" data-level="5.7" data-path="base-r.html"><a href="base-r.html#a-vector-has-three-properties"><i class="fa fa-check"></i><b>5.7</b> A Vector Has Three Properties</a></li>
<li class="chapter" data-level="5.8" data-path="base-r.html"><a href="base-r.html#attributes"><i class="fa fa-check"></i><b>5.8</b> Attributes</a></li>
<li class="chapter" data-level="5.9" data-path="base-r.html"><a href="base-r.html#type-coercion-conversion"><i class="fa fa-check"></i><b>5.9</b> Type Coercion (Conversion)</a></li>
<li class="chapter" data-level="5.10" data-path="base-r.html"><a href="base-r.html#na-represents-missing"><i class="fa fa-check"></i><b>5.10</b> NA represents missing</a></li>
<li class="chapter" data-level="5.11" data-path="base-r.html"><a href="base-r.html#useful-functions-for-a-vector"><i class="fa fa-check"></i><b>5.11</b> Useful Functions for a vector</a><ul>
<li class="chapter" data-level="5.11.1" data-path="base-r.html"><a href="base-r.html#generate-a-vector"><i class="fa fa-check"></i><b>5.11.1</b> Generate a vector</a></li>
<li class="chapter" data-level="5.11.2" data-path="base-r.html"><a href="base-r.html#indexing-or-subsetting-a-vector"><i class="fa fa-check"></i><b>5.11.2</b> Indexing or subsetting a Vector</a></li>
<li class="chapter" data-level="5.11.3" data-path="base-r.html"><a href="base-r.html#arrange-a-vector"><i class="fa fa-check"></i><b>5.11.3</b> Arrange a vector</a></li>
<li class="chapter" data-level="5.11.4" data-path="base-r.html"><a href="base-r.html#vectorization-of-functions"><i class="fa fa-check"></i><b>5.11.4</b> Vectorization of Functions</a></li>
<li class="chapter" data-level="5.11.5" data-path="base-r.html"><a href="base-r.html#some-more-functions"><i class="fa fa-check"></i><b>5.11.5</b> Some more functions</a></li>
</ul></li>
<li class="chapter" data-level="5.12" data-path="base-r.html"><a href="base-r.html#exercise-on-vectors"><i class="fa fa-check"></i><b>5.12</b> Exercise on vectors</a></li>
<li class="chapter" data-level="5.13" data-path="base-r.html"><a href="base-r.html#factors"><i class="fa fa-check"></i><b>5.13</b> Factors</a><ul>
<li class="chapter" data-level="5.13.1" data-path="base-r.html"><a href="base-r.html#what-is-a-factor"><i class="fa fa-check"></i><b>5.13.1</b> What is a factor?</a></li>
<li class="chapter" data-level="5.13.2" data-path="base-r.html"><a href="base-r.html#creating-a-factor"><i class="fa fa-check"></i><b>5.13.2</b> Creating a factor</a></li>
<li class="chapter" data-level="5.13.3" data-path="base-r.html"><a href="base-r.html#unordered-vs-ordered-factor"><i class="fa fa-check"></i><b>5.13.3</b> unordered vs ordered factor</a></li>
<li class="chapter" data-level="5.13.4" data-path="base-r.html"><a href="base-r.html#why-factors"><i class="fa fa-check"></i><b>5.13.4</b> Why factors?</a></li>
<li class="chapter" data-level="5.13.5" data-path="base-r.html"><a href="base-r.html#some-more-comments"><i class="fa fa-check"></i><b>5.13.5</b> Some more comments</a></li>
<li class="chapter" data-level="5.13.6" data-path="base-r.html"><a href="base-r.html#exercise-4"><i class="fa fa-check"></i><b>5.13.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="base-r.html"><a href="base-r.html#lists"><i class="fa fa-check"></i><b>5.14</b> Lists</a><ul>
<li class="chapter" data-level="5.14.1" data-path="base-r.html"><a href="base-r.html#what-is-a-list"><i class="fa fa-check"></i><b>5.14.1</b> What is a list?</a></li>
<li class="chapter" data-level="5.14.2" data-path="base-r.html"><a href="base-r.html#creating-a-list"><i class="fa fa-check"></i><b>5.14.2</b> Creating a list</a></li>
<li class="chapter" data-level="5.14.3" data-path="base-r.html"><a href="base-r.html#why-lists"><i class="fa fa-check"></i><b>5.14.3</b> Why lists?</a></li>
<li class="chapter" data-level="5.14.4" data-path="base-r.html"><a href="base-r.html#subsetting-a-list"><i class="fa fa-check"></i><b>5.14.4</b> Subsetting a List</a></li>
<li class="chapter" data-level="5.14.5" data-path="base-r.html"><a href="base-r.html#exercise-5"><i class="fa fa-check"></i><b>5.14.5</b> Exercise</a></li>
<li class="chapter" data-level="5.14.6" data-path="base-r.html"><a href="base-r.html#data-frames"><i class="fa fa-check"></i><b>5.14.6</b> Data frames</a></li>
<li class="chapter" data-level="5.14.7" data-path="base-r.html"><a href="base-r.html#the-apply-family-of-functions"><i class="fa fa-check"></i><b>5.14.7</b> The apply family of functions</a></li>
<li class="chapter" data-level="5.14.8" data-path="base-r.html"><a href="base-r.html#exercise-6"><i class="fa fa-check"></i><b>5.14.8</b> Exercise</a></li>
<li class="chapter" data-level="5.14.9" data-path="base-r.html"><a href="base-r.html#more-resources-1"><i class="fa fa-check"></i><b>5.14.9</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="base-r.html"><a href="base-r.html#matrices-and-arrays"><i class="fa fa-check"></i><b>5.15</b> Matrices and Arrays</a></li>
<li class="chapter" data-level="5.16" data-path="base-r.html"><a href="base-r.html#data-frames-1"><i class="fa fa-check"></i><b>5.16</b> Data Frames</a></li>
<li class="chapter" data-level="5.17" data-path="base-r.html"><a href="base-r.html#operators"><i class="fa fa-check"></i><b>5.17</b> Operators</a></li>
<li class="chapter" data-level="5.18" data-path="base-r.html"><a href="base-r.html#subsetting-a-matrix-and-array"><i class="fa fa-check"></i><b>5.18</b> Subsetting a Matrix and Array</a></li>
<li class="chapter" data-level="5.19" data-path="base-r.html"><a href="base-r.html#exercise-7"><i class="fa fa-check"></i><b>5.19</b> Exercise</a></li>
<li class="chapter" data-level="5.20" data-path="base-r.html"><a href="base-r.html#combine-matrices-by-columns-or-rows"><i class="fa fa-check"></i><b>5.20</b> Combine Matrices by Columns or Rows</a></li>
<li class="chapter" data-level="5.21" data-path="base-r.html"><a href="base-r.html#names-of-the-columns-and-rows-of-matrices"><i class="fa fa-check"></i><b>5.21</b> Names of the Columns and Rows of Matrices</a></li>
<li class="chapter" data-level="5.22" data-path="base-r.html"><a href="base-r.html#functions"><i class="fa fa-check"></i><b>5.22</b> Functions</a></li>
<li class="chapter" data-level="5.23" data-path="base-r.html"><a href="base-r.html#an-example-of-functions"><i class="fa fa-check"></i><b>5.23</b> An Example of Functions</a></li>
<li class="chapter" data-level="5.24" data-path="base-r.html"><a href="base-r.html#user-defined-functions"><i class="fa fa-check"></i><b>5.24</b> User-Defined Functions</a></li>
<li class="chapter" data-level="5.25" data-path="base-r.html"><a href="base-r.html#exercise-8"><i class="fa fa-check"></i><b>5.25</b> Exercise</a></li>
<li class="chapter" data-level="5.26" data-path="base-r.html"><a href="base-r.html#some-comments-on-functions"><i class="fa fa-check"></i><b>5.26</b> Some Comments on Functions</a></li>
<li class="chapter" data-level="5.27" data-path="base-r.html"><a href="base-r.html#generating-sequences"><i class="fa fa-check"></i><b>5.27</b> Generating Sequences</a></li>
<li class="chapter" data-level="5.28" data-path="base-r.html"><a href="base-r.html#control-flow-if-else"><i class="fa fa-check"></i><b>5.28</b> Control Flow (if-else)</a></li>
<li class="chapter" data-level="5.29" data-path="base-r.html"><a href="base-r.html#control-flow-for"><i class="fa fa-check"></i><b>5.29</b> Control Flow (for)</a></li>
<li class="chapter" data-level="5.30" data-path="base-r.html"><a href="base-r.html#control-flow-for-1"><i class="fa fa-check"></i><b>5.30</b> Control Flow (for)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="base-r-quiz.html"><a href="base-r-quiz.html"><i class="fa fa-check"></i><b>6</b> Base R Quiz</a><ul>
<li class="chapter" data-level="6.0.1" data-path="base-r-quiz.html"><a href="base-r-quiz.html#dataset1-diamonds-is-a-dataset-in-ggplot2-containing-the-prices-and-other-attributes-of-almost-54000-diamonds.-in-the-dataset-price-is-the-price-of-diamonds-in-us-dollars-and-carat-is-the-weight-of-the-diamonds-0.2-5.01."><i class="fa fa-check"></i><b>6.0.1</b> Dataset1: <code>diamonds</code> is a dataset in <code>ggplot2</code> containing the prices and other attributes of almost 54,000 diamonds. In the dataset, <code>price</code> is the price of diamonds in US dollars, and <code>carat</code> is the weight of the diamonds (0.2-5.01).</a></li>
<li class="chapter" data-level="6.0.2" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-1"><i class="fa fa-check"></i><b>6.0.2</b> Quiz problem 1</a></li>
<li class="chapter" data-level="6.0.3" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-2"><i class="fa fa-check"></i><b>6.0.3</b> Quiz problem 2</a></li>
<li class="chapter" data-level="6.0.4" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-3"><i class="fa fa-check"></i><b>6.0.4</b> Quiz problem 3</a></li>
<li class="chapter" data-level="6.0.5" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-4"><i class="fa fa-check"></i><b>6.0.5</b> Quiz problem 4</a></li>
<li class="chapter" data-level="6.0.6" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-5"><i class="fa fa-check"></i><b>6.0.6</b> Quiz problem 5</a></li>
<li class="chapter" data-level="6.0.7" data-path="base-r-quiz.html"><a href="base-r-quiz.html#dataset2-bfi-is-a-dataset-in-the-psych-package-containing-25-personality-self-report-items-taken-from-the-international-personality-item-pool.-in-the-dataset"><i class="fa fa-check"></i><b>6.0.7</b> Dataset2: <code>bfi</code> is a dataset in the <code>psych</code> package containing 25 personality self report items taken from the International Personality Item Pool. In the dataset,</a></li>
<li class="chapter" data-level="6.0.8" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-6"><i class="fa fa-check"></i><b>6.0.8</b> Quiz problem 6</a></li>
<li class="chapter" data-level="6.0.9" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-7"><i class="fa fa-check"></i><b>6.0.9</b> Quiz problem 7</a></li>
<li class="chapter" data-level="6.0.10" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-8"><i class="fa fa-check"></i><b>6.0.10</b> Quiz problem 8</a></li>
<li class="chapter" data-level="6.0.11" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-9"><i class="fa fa-check"></i><b>6.0.11</b> Quiz problem 9</a></li>
<li class="chapter" data-level="6.0.12" data-path="base-r-quiz.html"><a href="base-r-quiz.html#quiz-problem-10"><i class="fa fa-check"></i><b>6.0.12</b> Quiz problem 10</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R, Rstudio, and ggplot2</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-ggplot2" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Introduction to <code>ggplot2</code></h1>
<div id="what-is-ggplot2" class="section level2">
<h2><span class="header-section-number">2.1</span> What is <code>ggplot2</code></h2>
<ul>
<li>The <code>ggplot2</code> package <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span> was developed to build a graphic from <strong>few graphical components</strong> (e.g., data, coordinate systems, geometric objects, aesthetics, facets, themes) based on the <strong>grammar of graphics</strong>.</li>
</ul>
<blockquote>
<p>“Wilkinson (2005) created the <strong>grammar of graphics</strong> to describe the deep features that underlie all statistical graphics. The grammar of graphics is an answer to a question: <strong>what is a statistical graphic?</strong> The <strong>layered grammar of graphics</strong> (Wickham, 2009) builds on Wilkinson’s grammar, focussing on the primacy of <strong>layers</strong> and adapting it for embedding within R. In brief, the grammar tells us that a statistical graphic is a <strong>mapping</strong> from <strong>data</strong> to <strong>aesthetic attributes (colour, shape, size) of geometric objects (points, lines, bars)</strong>. The plot may also contain <strong>statistical transformations</strong> of the data and is drawn on a specific <strong>coordinate system</strong>. <strong>Faceting</strong> can be used to generate the same plot for different subsets of the dataset. It is the combination of these independent components that make up a graphic.”</p>
<p>— <span class="citation">Wickham (<a href="#ref-ggplot2">2016</a>)</span></p>
</blockquote>
<ul>
<li>The components of <code>ggplot2</code>
<ul>
<li>Data</li>
<li>Geometric objects (<strong>geom</strong> for short)</li>
<li>Aesthetic mappings</li>
<li>Statistical transformations (<strong>stats</strong> for short)</li>
<li>Scales</li>
<li>A coordinate system (<strong>coord</strong> for short)</li>
<li>A faceting</li>
</ul></li>
<li>Install the <code>tidyverse</code> package (or any package)
<ul>
<li>using <code>install.packages()</code> function</li>
<li>using the <code>Packages</code> pane</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</code></pre></div>
<ul>
<li>Load the <code>tidyverse</code> package onto memory</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># We need to load a package whenever we use it</span>
<span class="kw">suppressMessages</span>(<span class="kw">library</span>(tidyverse)) </code></pre></div>
</div>
<div id="data" class="section level2">
<h2><span class="header-section-number">2.2</span> Data</h2>
<ul>
<li>“The <strong>data</strong> are what you want to visualise and a set of <strong>aesthetic mappings</strong> describe how <strong>variables in the data</strong> are mapped to <strong>aesthetic attributes</strong> that you can perceive.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># diamonds is a built-in data in ggplot2</span>
<span class="co"># ?diamonds display the help document for data </span>
<span class="co"># tibble is a datastructure in tidyverse </span>
diamonds</code></pre></div>
<pre><code>## # A tibble: 53,940 x 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 0.23  Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2 0.21  Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
##  3 0.23  Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  4 0.290 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  5 0.31  Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  6 0.24  Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7 0.24  Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8 0.26  Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  9 0.22  Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
## 10 0.23  Very Good H     VS1      59.4    61   338  4     4.05  2.39
## # … with 53,930 more rows</code></pre>
</div>
<div id="geometric-objects-geoms" class="section level2">
<h2><span class="header-section-number">2.3</span> Geometric objects (<strong>geoms</strong>)</h2>
<ul>
<li>“Geometric objects, geoms for short, represent <strong>what you actually see</strong> on the plot: <strong>points</strong>, <strong>lines</strong>, <strong>polygons</strong>, etc.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ggplot() initializes a ggplot object.</span>
<span class="co"># it can be used to specify 1) a dataset, and 2) aesthetic mapping</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price))</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># geom_points() adds a new layer to a plot by drawing points to produce a scatter plot </span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) +<span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># geom_smooth() adds an additional layer to the plot by drawing a smoothed line to capture the trend in the scatterplot</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>()</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="exercise" class="section level2">
<h2><span class="header-section-number">2.4</span> Exercise</h2>
<ul>
<li><p>typing <code>mtcars</code> in your console will display the content of the <code>mtcars</code> dataset. How can we display the help document for the <code>mtcars</code> data?</p></li>
<li><p>type <code>head(mtcars)</code>. What did <code>head()</code> do? Check the help document of <code>head()</code> (<code>mtcar</code> is a dataframe in base R, whereas the <code>diamonds</code> is a tibble in <code>tidyverse</code>).</p></li>
<li><p>Using the <code>mtcars</code> data, plot the scatter plot between <code>mpg</code> (miles per gallon: y axis) and <code>disp</code> (displacement: x axis) with a smoothed line.</p></li>
</ul>
</div>
<div id="aesthetic-mappings" class="section level2">
<h2><span class="header-section-number">2.5</span> Aesthetic mappings</h2>
<ul>
<li><p>“A set of aesthetic mappings describe how <strong>variables in the data</strong> are mapped to <strong>aesthetic properties</strong> of the layer” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
<li><p>“To describe the way that <strong>variables in the data</strong> are mapped to <strong>things that we can perceive on the plot (the “aesthetics”)</strong>, we use the <code>aes</code> function. The <code>aes</code> function takes a list of aesthetic-variable pairs like these: <code>aes(x = weight, y = height, colour = age)</code>. Here we are mapping x-position to <code>weight</code>, y-position to <code>height</code> and colour to <code>age</code>. The first two arguments can be left without names, in which case they correspond to the x and y variables.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># color = color maps the variable &#39;color` in the dataset to the color aesthetics of points to encode further information in the graphic. </span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">color =</span> color)) +<span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># shape = cut maps the variable &#39;cut` in the dataset to the shape aesthetics of points to encode further information in the graphic. </span>
<span class="co"># the graphic is not so informative because points are overplotted. Sometimes, facetting may handle overplotting </span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price, <span class="dt">shape =</span> cut)) +<span class="st"> </span><span class="kw">geom_point</span>()</code></pre></div>
<pre><code>## Warning: Using shapes for an ordinal variable is not advised</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat, <span class="dt">y =</span> price)) +<span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">&quot;blue&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="exercise-1" class="section level2">
<h2><span class="header-section-number">2.6</span> Exercise</h2>
<ul>
<li><p><code>mpg</code> is similar to <code>mtcars</code> but is a built-in tibble in <code>ggplot2</code>. 1) Plot <code>hwy</code> (mile per gallon: y axis) against <code>displ</code> (engine displancement: x axis), 2) Given the plot from 1), map the <code>class</code> variable to color, shape, alpha, and size aesthetics.</p></li>
<li><p>Explain what happens.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color=</span>drv)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<ul>
<li>This is what happens when mapping <code>hyw</code>, <code>displ</code>, and <code>cyl</code> to <code>x</code>, <code>y</code>, and <code>color</code> aesthetics. R creates a new dataset that contains all the data to be displayed on the plot.</li>
</ul>
<table>
<thead>
<tr class="header">
<th>x</th>
<th>y</th>
<th>color</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.8</td>
<td>29</td>
<td>4</td>
</tr>
<tr class="even">
<td>1.8</td>
<td>29</td>
<td>4</td>
</tr>
<tr class="odd">
<td>2.0</td>
<td>31</td>
<td>4</td>
</tr>
<tr class="even">
<td>2.0</td>
<td>30</td>
<td>4</td>
</tr>
<tr class="odd">
<td>2.8</td>
<td>26</td>
<td>6</td>
</tr>
<tr class="even">
<td>2.8</td>
<td>26</td>
<td>6</td>
</tr>
<tr class="odd">
<td>3.1</td>
<td>27</td>
<td>6</td>
</tr>
<tr class="even">
<td>1.8</td>
<td>26</td>
<td>4</td>
</tr>
<tr class="odd">
<td>1.8</td>
<td>25</td>
<td>4</td>
</tr>
<tr class="even">
<td>2.0</td>
<td>28</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<div id="scales" class="section level2">
<h2><span class="header-section-number">2.7</span> Scales</h2>
<ul>
<li><p>In the previous table, computers don’t know how to display colors based on 4, 6, … Computers need a a hexadecimal code for colors such as <code>FF6C91</code>. The mapping from the data to the final values that computers can use to display aesthetics is called a scale.</p></li>
<li><p>“The scales map values in the data space to values in an aesthetic space, whether it be colour, or size, or shape. Scales draw a legend or axes, which provide an inverse mapping to make it possible to read the original data values from the graph.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
<li><p><code>scale_x_continuous()</code> and <code>scale_y_continuous()</code> are the default scales for continuous x and y aesthetics: <a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="uri">https://ggplot2.tidyverse.org/reference/scale_continuous.html</a>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p1 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(displ, hwy)) +<span class="st"> </span><span class="kw">geom_point</span>()
p1</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># change the axis labels</span>
p1 +<span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="st">&quot;Engine displacement (L)&quot;</span>) +
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="st">&quot;Highway MPG&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># also use the short-cut labs()</span>
p1 +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;Engine displacement (L)&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Highway MPG&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># modify the axis limits</span>
p1 +<span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">6</span>))</code></pre></div>
<pre><code>## Warning: Removed 27 rows containing missing values (geom_point).</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use the short hand functions `xlim()` and `ylim()`</span>
p1 +<span class="st"> </span><span class="kw">xlim</span>(<span class="dv">2</span>, <span class="dv">6</span>)</code></pre></div>
<pre><code>## Warning: Removed 27 rows containing missing values (geom_point).</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  choose where the ticks appear</span>
p1 +<span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>))</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#  choose your own labels</span>
p1 +<span class="st"> </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), <span class="dt">label =</span> <span class="kw">c</span>(<span class="st">&quot;two&quot;</span>, <span class="st">&quot;four&quot;</span>, <span class="st">&quot;six&quot;</span>))</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color=</span>drv)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span><span class="st">&quot;MPG vs Engine size&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Engine size&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;MPG&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create your own discrete scale</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color=</span>drv)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&quot;lm&quot;</span>) +<span class="st"> </span><span class="kw">labs</span>(<span class="dt">title =</span><span class="st">&quot;MPG vs Engine size&quot;</span>, <span class="dt">x =</span> <span class="st">&quot;Engine size&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;MPG&quot;</span>) +<span class="st"> </span><span class="kw">scale_colour_manual</span>(<span class="dt">name =</span> <span class="st">&quot;Drive&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;lightpink&quot;</span>, <span class="st">&quot;darkseagreen&quot;</span>, <span class="st">&quot;lightblue&quot;</span>))</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color=</span>cty)) +<span class="st"> </span><span class="kw">geom_point</span>() </code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> mpg, <span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">x =</span> displ, <span class="dt">y =</span> hwy, <span class="dt">color=</span>cty)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">scale_colour_gradient</span>(<span class="dt">name =</span> <span class="st">&quot;City MPG&quot;</span>, <span class="dt">low =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">high =</span> <span class="st">&quot;blue&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<ul>
<li><p>For more details about scales, see <a href="https://ggplot2.tidyverse.org/reference/" class="uri">https://ggplot2.tidyverse.org/reference/</a>.</p></li>
<li><p>Colors in R: <a href="http://www.sthda.com/english/wiki/colors-in-r" class="uri">http://www.sthda.com/english/wiki/colors-in-r</a></p></li>
</ul>
</div>
<div id="statistical-transformations-stats-for-short" class="section level2">
<h2><span class="header-section-number">2.8</span> Statistical transformations (<strong>stats</strong> for short)</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># historam shows the distribution of a single variable. </span>
<span class="co"># where does count come from? </span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat)) +<span class="st"> </span><span class="kw">geom_histogram</span>()</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<ul>
<li><p>“Statistical transformations, <strong>stats</strong> for short, summarise data in many useful ways. For example, binning and counting observations to create a histogram, or summarising a 2d relationship with a linear model. Stats are optional, but very useful.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
<li>How <code>geom_histogram()</code> works?
<ul>
<li>“A stat takes a dataset as input and returns a dataset as output, and so a stat can add new variables to the original dataset. It is possible to map aesthetics to these new variables. For example, <code>stat_bin</code>, the statistic used to make histograms, produces the following variables:
<ul>
<li><code>count</code>, the number of observations in each bin</li>
<li><code>density</code>, the density of observations in each bin (percentage of total / bar width)</li>
<li><code>x</code>, the centre of the bin&quot; <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></li>
</ul></li>
<li>“These generated variables can be used instead of the variables present in the original dataset. For example, the default histogram geom assigns the height of the bars to the number of observations (<code>count</code>), but if you’d prefer a more traditional histogram, you can use the density (<code>density</code>). The following example shows a density histogram of carat from the diamonds dataset.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The names of generated variables must be surrounded with ..</span>
 <span class="kw">ggplot</span>(diamonds, <span class="kw">aes</span>(carat)) +<span class="st"> </span><span class="kw">geom_histogram</span>(<span class="kw">aes</span>(<span class="dt">y =</span> ..density..), <span class="dt">binwidth =</span> <span class="fl">0.1</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<ul>
<li><p>Every <strong>geom</strong> has a default <strong>stats</strong>.</p></li>
<li>Position adjustments
<ul>
<li>Position adjustments determine how to arrange <strong>geoms</strong> that would otherwise occupy the same space.</li>
</ul></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The discrete analogue of histogram is the bar plot</span>
s &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(fl, <span class="dt">fill =</span> drv))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s +<span class="st"> </span><span class="kw">geom_bar</span>()</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Stack elements on top of one another</span>
s +<span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;stack&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Arrange elements side by side</span>
s +<span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;dodge&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Stack elements on top of one another,normalize height</span>
s +<span class="st"> </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
</div>
<div id="a-faceting" class="section level2">
<h2><span class="header-section-number">2.9</span> A faceting</h2>
<ul>
<li><p>“A faceting specification describes how to break up the data into <strong>subsets</strong> and how to display those subsets as <strong>small multiples</strong>. This is also known as <strong>conditioning</strong> or latticing/trellising.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
<li><p>“There are two types of faceting provided by ggplot2: <code>facet_grid</code> and <code>facet_wrap</code>. Facet grid produces a 2d grid of panels defined by variables which form the rows and columns, while facet wrap produces a 1d ribbon of panels that is wrapped into 2d” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># facet into rows</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat)) +<span class="st"> </span><span class="kw">geom_histogram</span>() +<span class="st"> </span><span class="kw">facet_grid</span>(color ~<span class="st"> </span>.)</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># facet into columns</span>
<span class="kw">ggplot</span>(<span class="dt">data =</span> diamonds, <span class="kw">aes</span>(<span class="dt">x =</span> carat)) +<span class="st"> </span><span class="kw">geom_histogram</span>() +<span class="st"> </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>color)</code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="exercise-2" class="section level2">
<h2><span class="header-section-number">2.10</span> Exercise</h2>
<ul>
<li><p>Using <code>mpg</code> data, plot <code>hwy</code> (y) vs <code>cty</code> (x).</p></li>
<li><p>facet into rows using <code>cyl</code>.</p></li>
<li><p>facet into columns using <code>cyl</code>.</p></li>
<li><p>facet into rows using <code>cyl</code> and columns using <code>year</code></p></li>
</ul>
</div>
<div id="grouping" class="section level2">
<h2><span class="header-section-number">2.11</span> Grouping</h2>
<ul>
<li><p>“In many situations, you want to <strong>separate your data into groups</strong>, but render them in the same way. When looking at the data in aggregate you want to be able to distinguish individual subjects, but not identify them. This is common in <strong>longitudinal studies</strong> with many subjects, where the plots are often descriptively called spaghetti plots.” <span class="citation">(Wickham <a href="#ref-ggplot2">2016</a>)</span></p></li>
<li><p><code>Oxboys</code> is a dataset in the <code>nlme</code> package. <code>Oxboys</code> includes the height of a selection of boys from Oxford, England versus a standardized age.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(nlme)</code></pre></div>
<pre><code>## 
## Attaching package: &#39;nlme&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     collapse</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># age = a numeric vector giving the standardized age </span>
<span class="kw">head</span>(Oxboys)</code></pre></div>
<pre><code>## Grouped Data: height ~ age | Subject
##   Subject     age height Occasion
## 1       1 -1.0000  140.5        1
## 2       1 -0.7479  143.4        2
## 3       1 -0.4630  144.8        3
## 4       1 -0.1643  147.1        4
## 5       1 -0.0027  147.7        5
## 6       1  0.2466  150.2        6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(Oxboys, <span class="kw">aes</span>(age, height)) +<span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(Oxboys, <span class="kw">aes</span>(age, height, <span class="dt">group =</span> Subject)) +<span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># In many cases, this is not what we want</span>
<span class="kw">ggplot</span>(Oxboys, <span class="kw">aes</span>(age, height, <span class="dt">group =</span> Subject)) +<span class="st"> </span><span class="kw">geom_line</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>()</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># group = 1 override the default grouping </span>
<span class="kw">ggplot</span>(Oxboys, <span class="kw">aes</span>(age, height, <span class="dt">group =</span> Subject)) +<span class="st"> </span><span class="kw">geom_line</span>() +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">group =</span> <span class="dv">1</span>))</code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># facet is also useful for visualizing longitudinal data</span>
<span class="kw">ggplot</span>(Oxboys, <span class="kw">aes</span>(age, height)) +<span class="st"> </span><span class="kw">geom_line</span>() +<span class="st"> </span><span class="kw">facet_wrap</span>(~Subject)</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
</div>
<div id="themes" class="section level2">
<h2><span class="header-section-number">2.12</span> Themes</h2>
<p>“Themes are a powerful way to <strong>customize</strong> the non-data components of your plots: i.e. titles, labels, fonts, background, gridlines, and legends.” More details are available at <a href="https://ggplot2.tidyverse.org/reference/theme.html" class="uri">https://ggplot2.tidyverse.org/reference/theme.html</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> hwy, <span class="dt">y =</span> cty)) +<span class="st"> </span><span class="kw">geom_point</span>() </code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> hwy, <span class="dt">y =</span> cty)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">theme</span>(<span class="dt">panel.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="dt">colour =</span> <span class="st">&quot;grey50&quot;</span>))</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(mpg, <span class="kw">aes</span>(<span class="dt">x =</span> hwy, <span class="dt">y =</span> cty)) +<span class="st"> </span><span class="kw">geom_point</span>() +<span class="st"> </span><span class="kw">theme_classic</span>()</code></pre></div>
<p><img src="Introduction-to-R,-Rstudio,-and-ggplot2_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
</div>
<div id="save-a-ggplot" class="section level2">
<h2><span class="header-section-number">2.13</span> Save a ggplot</h2>
<ul>
<li><code>ggsave()</code> is a convenient function for saving a plot. It defaults to saving the <strong>last plot</strong> that you displayed.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggsave</span>(<span class="st">&quot;mtcars.pdf&quot;</span>)</code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
</div>
<div id="more-resources" class="section level2">
<h2><span class="header-section-number">2.14</span> More resources</h2>
<ul>
<li><code>ggplot2</code> Reference: <a href="https://ggplot2.tidyverse.org/reference/index.html" class="uri">https://ggplot2.tidyverse.org/reference/index.html</a></li>
<li>Many R galleries (e.g., <a href="https://www.r-graph-gallery.com" class="uri">https://www.r-graph-gallery.com</a>)</li>
<li>Google</li>
</ul>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-ggplot2">
<p>Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="descriptive-statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/01-ggplot2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["Introduction to R, Rstudio, and ggplot2.pdf", "Introduction to R, Rstudio, and ggplot2.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
